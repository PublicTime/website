---
layout: post
permalink: blog/posts/publicntps-stratum-one-deployment-checklist.html
---
<div class="home__section">
	<a href="../../blog.html" class="blog-detail__back">
		Back
		<img class="blog-detail__back-icon" src="../../images/back.svg" alt="Back Arrow">
	</a>
</div>
<div class="home__section">
	<h1 class="home__title">PublicNTP’s Stratum One Deployment Checklist</h1>
</div>
<div class="home__section">
	<p class="blog-detail__time blog-detail__time-main">
		<b>March</b> 4, 2019
	</p>
	<div class="blog-detail__side">
		<img class="blog-detail__image" src="../../images/atlas-adventure.jpg"  alt="Atlas addventure">
		<div class="node-clear"></div>
		<img class="blog-detail__image" src="../../images/airbus.jpg"  alt="Airbus">
		<div class="node-clear"></div>
		<img class="blog-detail__image" src="../../images/do-not-enter.jpg"  alt="Do Not Enter">
		<div class="node-clear"></div>
	</div>
	<div class="blog-detail__swiper swiper-container">
		<div class="swiper-wrapper">
			<img class="blog-detail__simage swiper-slide" src="../../images/atlas-adventure.jpg" alt="Atlas addventure"> 			<img class="blog-detail__simage swiper-slide" src="../../images/airbus.jpg" alt="Airbus"> 			<img class="blog-detail__simage swiper-slide" src="../../images/do-not-enter.jpg" alt="Do Not Enter"> 
		</div>
		<div class="swiper-pagination"></div>
	</div>
	<div class="blog-detail__content">
		<p class="blog-detail__time blog-detail__time-mobile">
			<b>March</b> 4, 2019
		</p>
		<div class="blog-detail__article">
			<h4><a href='/people.html#dan-noland'>Dan Noland</a></h4><p>The previous blog <a href='/blog/posts/What-Goes-Into-Deployment.html'>article</a> about server deployment mentioned our two physical (stratum one server) deployment projects: Project Ikenga and Project Tonatiuh.</p><p>Much in the same way we dove into virtual servers, we figured it would be fairly easy to find an underserved country and find a company who would lease us some power, space, and network bandwidth.</p><p>Oh, how adorably naive we were…  :)</p><p>After much trial and error, investigation, and a couple wake-up calls from some...let’s go with “well-traveled”...friends, we gradually came to realize that there is a lot more to nailing down a location than finding the nearest person happy to take our money.</p><p>Multiple times during our search into locations, we’d find a deal-breaking detail. We then would take this new information and check to see if any of the other locations had that issue as well. During this evolution of understanding, we developed a “checklist” of sorts that contains several different dimensions of what’s involved with a deployment. It’s unlikely to find a “perfect” location, but the goal is find the locations with the most acceptable tradeoffs.</p><p>The following is our current, subject-to-change, guide for locating the best cities to lay down physical gear. As we have been adding things to consider to the list since the search started, it’s likely that it will continue to change/expand as time goes on.</p><p>1. <strong>IS-95A cell phone network</strong>: it turns out that in order to participate in a cellular network, the cell towers have to have hyper accurate time.. While you do need a subscription plan to send messages or make phone calls on an IS-95A network, you do not need one to read the timestamps on messages sent by the cell towers. Several stratum one NTP server vendors take advantage of the fact that just being within the broadcast range of a cell tower means you can have incredibly accurate (nanosecond-level) time accuracy.</p><p>While we also have GPS-based servers on hand, we feel going for a simpler, cheaper deployment for our first one makes a lot of sense. IS-95A CDMA-based gear is affordable and transportable enough that the company has a couple sitting on a shelf in my closet.</p><p>2. <strong>Datacenter Provider We Can Have Confidence In</strong>: This was a fun lesson. We were swapping emails with a potential provider in Africa (a location that we discovered would fail more than one of the tests on this list -- thankfully BEFORE we arrived!). The company had a nice website, were very responsive to our emailed questions, and seemed very eager to become our hosting partner. As we did more research on logistics, we thought to look at the location using satellite imagery, only to discover it was a literal hut with a satellite dish. Needless to say, we realized that vetting both the personalities AND the location/facility were required for future exchanges.</p><p>3. <strong>Health risk</strong>: A lot of underserved countries present risk for diseases that we in the United States are lucky enough to put out of our minds Thankfully, the Center for Disease Control gives a list of recommended vaccinations for every country on the planet. It was a bit of a shock to realize that for some of the locations we were going to require vaccinations for things like <a href='https://wwwnc.cdc.gov/travel/destinations/traveler/none/nigeria'>typhoid</a>, <a href='https://wwwnc.cdc.gov/travel/destinations/traveler/none/brazil'>yellow fever</a>, <a href='https://wwwnc.cdc.gov/travel/destinations/traveler/none/ghana'>meningitis</a>, <a href='https://wwwnc.cdc.gov/travel/destinations/traveler/none/ivory-coast'>hepatitis A/B</a>, <a href='https://wwwnc.cdc.gov/travel/destinations/traveler/none/kenya'>cholera</a>, and/or <a href='https://wwwnc.cdc.gov/travel/destinations/traveler/none/senegal'>malaria</a>.</p><p>Some of these vaccines require scheduling your appointment weeks or months in advance, and some take weeks or months after receiving the vaccine for the body to reach maximum immunity. All of this needs to be factored into travel planning.</p><p>4. <strong>Safety risk</strong>: we leave it to the State Department’s <a href='https://travelmaps.state.gov/TSGMap/'>travel advisory information</a> to help inform this dimension. Obviously we have a strong preference for level 1 (“normal level of awareness“) but are willing to consider countries up to level 2 (“increased level of caution“). As this is a passion, not a job, we don’t see a compelling reason to disagree with the U.S. government when they encourage people to “reconsider travel” or “do not travel” to an area.</p><p>5. <strong>Visas</strong>: PublicNTP has a preference for countries with no requirement for business visas to enter their country. It’s not a big deal, but it does add complications and costs.</p><p>6. <strong>Accessibility</strong>: we’re not looking for an Indiana Jones-grade adventure to get to our server box. For now we’re looking for locations with a major international airport with good connectivity (if indirect) from where our Directors live: Utah, Indiana, and the Washington, DC Metro Area.</p><p>7. <strong>Costs (Travel)</strong>: Costs of airfare, hotel, and food need to be reasonable. When committing to a deployment, we’re wanting to remain on-site for anywhere up to a couple weeks to make sure things are up and running. More people + more time = more costs we have to anticipate.</p><p>8. <strong>Costs (Datacenter)</strong>: we’re not big enough or influential enough (yet?) to build our own sites and maintain them. So it’s in our best interest to work with people and businesses who already have a datacenter. Their one-time and recurring costs for installing and hosting our servers need to fit within the budget our donors make possible.</p><p>9. <strong>Connectivity</strong>: we want to deploy our time servers where they will reach the widest audience possible. A big part of that is what the network connectivity from the datacenter looks like. It’s very common, for example, to see boomerang routing between locations very close to each other in South America. We’ve seen a number of internet routes from, for example, <a href='https://www.google.com/maps/place/Bogot%C3%A1,+Bogota,+Colombia/@4.6671859,-83.0888895,5z/data=!4m5!3m4!1s0x8e3f9bfd2da6cb29:0x239d635520a33914!8m2!3d4.7109886!4d-74.072092'>Bogota, Colombia</a> to <a href='https://www.google.com/maps/place/S%C3%A3o+Paulo,+State+of+S%C3%A3o+Paulo,+Brazil/@-4.5633786,-59.3301997,4.1z/data=!4m5!3m4!1s0x94ce448183a461d1:0x9ba94b08ff335bae!8m2!3d-23.5505199!4d-46.6333094'>São Paulo, Brazil</a> that route through Miami, Florida in the United States. It makes no logical sense that you’d have to go north--the exact opposite direction--before being able to go back south. These sort of network access issues affect the suitability of hosting platforms for PublicNTP.</p><p>10. <strong>Import/Export Restrictions</strong>: due to US and international law, it may not be legal for us to deploy equipment in a given part of the world.</p><p>As an illustration, here is the <a href='https://www.microsoft.com/en-us/exporting/exporting-information.aspx'>export list for Microsoft products</a>. Note that the XBox One has an Export Control Classification Number (<a href='https://www.bis.doc.gov/index.php/licensing/commerce-control-list-classification/export-control-classification-number-eccn'>ECCN</a>) of 5A992.c, assigned by the US Department of Commerce. As it has been classified, there are certain countries where one would have to apply for a license before taking an XBox One to those countries (in this case, the only countries it would not be legal to export the hardware to is on the Department of Commerce’s <a href='https://www.bis.doc.gov/index.php/policy-guidance/country-guidance/sanctioned-destinations'>Sanctioned Destinations</a> list).</p><p>On the flip side, there are countries where it may be illegal to import the equipment. One reason for such restrictions might be that the equipment contains cryptographic capabilities. </p><p>PublicNTP has retained legal counsel to help us ensure that we abide by all import/export laws of the US and any countries where we may deploy systems.</p><p>This list is subject to change because we’re always learning more. Still, these basic guidelines have already helped us vet various locations, make quick decisions, stay safe, and triage/prioritize some of our first possible location.</p>
		</div>
	</div>
</div>

<div class="home__section"></div>


<script defer src="../../js/swiper.min.js"></script>
<link rel="stylesheet" href="../../css/base.css">
<script defer src="../../js/swipe.js" async></script>

  

