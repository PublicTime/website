---
layout: post
permalink: blog/posts/What-Goes-Into-Deployment.html
---
      <div class="home__section">
	<a href="../../blog.html" class="blog-detail__back">
		Back
		<img class="blog-detail__back-icon" src="../../images/back.svg" alt="Back Arrow">
	</a>
</div>
<div class="home__section">
	<h1 class="home__title">What Goes Into Deployment?</h1>
</div>
<div class="home__section">
	<p class="blog-detail__time blog-detail__time-main">
		<b>February</b> 18, 2019
	</p>
	<div class="blog-detail__side">
		<img class="blog-detail__image" src="../../images/checklist_deployment.jpg"  alt="Checklist">
		<div class="node-clear"></div>
	</div>
	<div class="blog-detail__swiper swiper-container">
		<div class="swiper-wrapper">
			<img class="blog-detail__simage swiper-slide" src="../../images/checklist_deployment.jpg" alt="Checklist"> 
		</div>
		<div class="swiper-pagination"></div>
	</div>
	<div class="blog-detail__content">
		<p class="blog-detail__time blog-detail__time-mobile">
			<b>February</b> 18, 2019
		</p>
		<div class="blog-detail__article">
			<h4><a href='/people.html#brad-woodfin'>Brad Woodfin</a></h4><p>As of this writing, all of PublicNTP’s deployed time servers are virtual (i.e., running in the cloud) -- except for Salt Lake City, because Scott is a  fan of turning things up to 11. This approach has served us well so far. It’s becoming clear that we’re reaching the point of diminishing returns for cloud deployments. In the underserved countries we’re now trying to target, cloud just won’t be an option.</p><p>Before we talk about the deployment avenues that remain viable for us, let’s take a minute to “talk stratums.”</p><p>If you read up on Network Time Protocol (NTP), you’ll quickly hit the term “stratum,” which is followed by a number. You’ll see “stratum zero” servers, “stratum one” servers, etc.</p><p>What does that mean?</p><p>Stratum is a term to describe how close to an authoritative NTP time source a device is.</p><p>To oversimplify, you can view it as “the number of wires you need to cross before you can reach an authoritative time source.”</p><p>In other words, stratum zero servers are authoritative devices like GPS and other atomic clock sources -- no wires have to be crossed to reach the high-precision time source, they ARE the time source.</p><p>Devices like a Linux server connected directly to a stratum zero device is considered a stratum one device (there’s “one wire” from the server to its GPS receiver). The math follows on down the stratum tiers: if a stratum two device obtains its time from stratum one servers (usually across the Internet).</p><p>The cool thing is that using NTP, devices can connect to multiple sources of time -- meaning that a stratum two servers can be querying multiple stratum one servers. That web of connections allows a device that’s two steps removed from an “authoritative” source to be much more reliable, as it can “double-check” the answers it’s getting from multiple upstream sources</p><p>All the PublicNTP servers (other than Utah!) are stratum two servers.  We sync to at least five stratum one sources, which keeps them within 1 and 10 milliseconds of the international time standard. So far we’ve been very pleased with the results. Deploy a server in developed parts of the world with major cloud infrastructure, such as Europe or East Asia and you’ll find a plethora of upstream time sources to ensure your clocks are accurate.</p><p>When PublicNTP set out to deploy in lesser-developed regions of the world, we figured that NTP would still be resilient enough to be able to work well.</p><p>That was a tad optimistic -- at least with our definition of NTP when it’s “working well.” :)</p><p>Turns out that absolutely everything is stacked against having highly-accurate time in much of the world. For example, we deployed a virtual server in Lagos, Nigeria. Through this process, we discovered first-hand how the severe lack of terrestrial cables across Africa turned out to be a huge obstacle. If you looked at the path of all data traveling out of Lagos through our time server, the only two paths we had access to were submarine fiber optic cabling to either South Africa OR London.</p><p>When you pause to <a href='https://www.submarinecablemap.com/'>look at a map</a>, that’s an enormous distance to cross even for data moving at the speed of light. Testing quickly showed we couldn’t get more accurate than 100 milliseconds from UTC, due to lack of upstream time sources within several thousand miles from Nigeria.</p><p>For humans, a tenth of a second is almost negligible. But for digital infrastructure that requires synchronization within 1/1,000th of a second or better, it was a rough situation.</p><p>We quickly realized we were facing a situation that our current approach wasn’t going to work with.</p><p>Enter <strong><a href='/blog/posts/Project-Ikenga.html'>Project Ikenga</a></strong> and <strong>Project Tonatiuh</strong>: PublicNTP’s first two physical deployment campaigns. We’ll talk specifically about both of these projects in future articles but in short, we realized that <strong>we</strong> had to bring our own stratum one sources, as there weren’t any in the region which could make stratum two servers viable. Pursuing physical deployments come with their own brain teasers which we’ve been digging into for the last several months.</p><p>PublicNTP is excited to continue expanding our deployment footprint, installing our servers wherever they’re most needed. After hundreds of (combined) hours investigating physical deployments, we’ve gradually developed a checklist of sorts that we use to try and quickly vet the viability of a potential deployment location. Watch for an article coming soon that breaks that checklist down -- and consider yourself invited to help us improve it.  It continues to improve, but like everything about this project, it can only get better!</p>
		</div>
	</div>
</div>

<div class="home__section"></div>

<script defer src="../../js/swiper.min.js"></script>
<link rel="stylesheet" href="../../css/base.css">
<script defer src="../../js/swipe.js" async></script>


